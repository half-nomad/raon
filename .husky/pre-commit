#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# ë¬¸ì„œ ì¼ê´€ì„± ì²´í¬
echo "ğŸ“‹ Checking documentation consistency..."

# TODO ì™„ë£Œ ê°œìˆ˜ ì¶”ì¶œ
TODO_DONE=$(grep -c "^- \[x\]" docs/02-TODO.md || echo "0")
TODO_TOTAL=$(grep -c "^- \[" docs/02-TODO.md || echo "0")

# PLAN ì™„ë£Œ ê°œìˆ˜ ì¶”ì¶œ
PLAN_DONE=$(grep -c "^- \[x\]" docs/01-PLAN.md || echo "0")

# ê²½ê³  ë©”ì‹œì§€
echo "âœ… TODO: $TODO_DONE/$TODO_TOTAL completed"
echo "âœ… PLAN: $PLAN_DONE milestones completed"

# CHANGELOG ìµœê·¼ ì—…ë°ì´íŠ¸ í™•ì¸
CHANGELOG_DATE=$(grep -m 1 "## \[" docs/03-CHANGELOG.md | grep -o "[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}" || echo "none")
echo "ğŸ“… CHANGELOG last updated: $CHANGELOG_DATE"

# ê²½ê³ ë§Œ í‘œì‹œ (ì»¤ë°‹ ì°¨ë‹¨ ì•ˆ í•¨)
if [ "$CHANGELOG_DATE" != "$(date +%Y-%m-%d)" ]; then
  echo "âš ï¸  Warning: CHANGELOG might need update"
fi

exit 0
